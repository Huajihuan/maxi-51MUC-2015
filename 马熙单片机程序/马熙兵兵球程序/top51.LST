C51 COMPILER V9.01   TOP51                                                                 02/13/2015 03:18:02 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE TOP51
OBJECT MODULE PLACED IN top51.OBJ
COMPILER INVOKED BY: C:\KeilMDK\C51\BIN\C51.EXE top51.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************
   2           *
   3           *                           top51.c
   4           *
   5           *********************************************************************
   6           * 描    述: TOP51主板初始化函数
   7           * 开发平台: TOP51开发板+KEIL C51
   8           * 公    司: 爱晶电子                   
   9           * 网    址: http://www.ajdz.net
  10           * 作者                 日期                    注释
  11           *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  12           * 王伟民               09/04/01                原始文件
  13           * 王伟民               09/10/20                v1.1
  14           ********************************************************************/
  15          
  16          #include "stc.h"/*包含STC单片机头文件*/
  17          #include "top51.h"/*包含TOP51开发板头文件*/
  18          
  19          /*top51主板初始化函数*/
  20          void top51_init(void)
  21          {
  22   1              /* top51 引脚方向、输出初值定义 */
  23   1              //P0M1=0x00;/*0b00000000,设置P0为推挽输出*/
  24   1              //P0M0=0xff;/*0b11111111*/
  25   1      
  26   1              P0M1=0x00;/*0b00000000,设置P0为准双向口*/       
  27   1              P0M0=0x00;/*0b00000000*/
  28   1              
  29   1              //P1M1=0x4c;/*0b01001100,设置P1.0、P1.1为推挽输出*/
  30   1              //P1M0=0xb3;/*0b10110011*/
  31   1      
  32   1              P1M1=0x4c;/*0b01001100,设置P1.0、P1.1为准双向口*/       
  33   1              P1M0=0xb0;/*0b10110000*/
  34   1              
  35   1              P2M1=0x00;/*0b00000000*/
  36   1              P2M0=0xff;/*0b11111111*/
  37   1              
  38   1              P3M1=0x45;/*0b01000101*/
  39   1              P3M0=0x82;/*0b10000010*/
  40   1      
  41   1              P4SW=0x70;/*0bx111xxxx,将P4.4、P4.5、P4.6设置为I/O脚*/  
  42   1              
  43   1              //P4M1=0x00;/*0b00000000,设置P4.4、P4.5、P4.6为推挽输出*/       
  44   1              //P4M0=0x70;/*0b01110000*/
  45   1      
  46   1              P4M1=0x00;/*0b00000000,设置P4.4、P4.5、P4.6为准双向口*/ 
  47   1              P4M0=0x00;/*0b00000000*/
  48   1              
  49   1              CS88=1;
  50   1              CS88=0;
  51   1              P0=0x00;
  52   1              P1=0x00;
  53   1              COL0=0; 
  54   1              COL1=0; 
  55   1              COL2=0; 
C51 COMPILER V9.01   TOP51                                                                 02/13/2015 03:18:02 PAGE 2   

  56   1              COL3=0; 
  57   1              BZ=0;
  58   1              EN=0;/*让LCD1602数据口处于输入状态，相当于LCD1602使不能，让其释放数据总线*/
  59   1              CS=1;/*TF卡使不能*/
  60   1              RST=0;/*ds1302使不能*/
  61   1      
  62   1              CS88=1;
  63   1              P0=0xff;/*关闭点阵管，所有列均不显示*/
  64   1              CS88=0;/*输出被锁存*/
  65   1              
  66   1              P0=0;
  67   1              P1=0;/*关闭点阵管显示*/
  68   1      }
  69          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     65    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
